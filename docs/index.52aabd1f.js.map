{"mappings":"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","sources":["./src/utils.js","./src/components/playButton.js","./src/components/stopButton.js","./src/components/pauseButton.js","./src/components/time.js","./src/components/speedRange.js","./src/components/visualizer/helper.js","./src/components/visualizer/visualize.js","./src/components/visualizer/visual.js","./src/components/visualizer/index.js","./src/source.js"],"sourcesContent":["export const getStartPosition = (audio) => audio.dataset.startAt || 0\n\nexport function debounce(func, wait, immediate) {\n    let timeout;\n  \n    return function executedFunction() {\n      const context = this;\n      const args = arguments;\n  \n      const later = function() {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      };\n  \n      const callNow = immediate && !timeout;\n  \n      clearTimeout(timeout);\n  \n      timeout = setTimeout(later, wait);\n  \n      if (callNow) func.apply(context, args);\n    };\n  };","import { getStartPosition } from '../utils';\n\nconst el = document.getElementById('play-btn');\nel.classList.add('disabled');\n\nexport default {\n  unmount() {},\n  mount(audio) {\n    console.log('play button mount');\n    const handleCanPlayThrough = () => {\n      el.classList.remove('disabled');\n    };\n\n    const handleClick = () => {\n      if (audio.duration > 0 && !audio.paused) {\n        audio.pause();\n        audio.currentTime = getStartPosition(audio)\n      } else {\n        audio.play();\n      }\n    };\n\n    const handleChangeState = () => {\n      el.classList.toggle('active');\n    };\n\n    audio.addEventListener('canplaythrough', handleCanPlayThrough);\n    ['play', 'pause'].forEach((e) =>\n      audio.addEventListener(e, handleChangeState)\n    );\n    el.addEventListener('click', handleClick);\n\n    this.unmount = () => {\n      console.log('play button unmount');\n      el.classList.add('disabled');\n      el.removeEventListener('click', handleClick);\n      audio.removeEventListener('canplaythrough', handleCanPlayThrough);\n      ['play', 'pause'].forEach((e) =>\n        audio.removeEventListener(e, handleChangeState)\n      );\n    };\n  },\n};\n","import { getStartPosition } from '../utils';\n\nconst el = document.getElementById('stop-btn');\nel.classList.add('disabled');\n\nexport default {\n  unmount() {},\n  mount(audio) {\n    console.log('stop button mount');\n    el.classList.remove('disabled');\n    const handleClick = () => {\n      audio.pause();\n      audio.currentTime = getStartPosition(audio);\n    };\n\n    el.addEventListener('click', handleClick);\n    this.unmount = () => {\n      console.log('stop button unmount');\n      el.removeEventListener('click', handleClick);\n      el.classList.add('disabled');\n    };\n  },\n};\n","const el = document.getElementById('pause-btn');\nel.classList.add('disabled');\n\nexport default {\n  unmount() {},\n  mount(audio) {\n    console.log('pause button mount');\n    el.classList.remove('disabled');\n    const handleClick = () => {\n      if (audio.duration > 0 && !audio.paused) {\n        audio.pause();\n        el.classList.add('active');\n      }\n    };\n\n    const handleChangeState = () => {\n      el.classList.remove('active');\n    };\n\n    audio.addEventListener('play', handleChangeState);\n\n    el.addEventListener('click', handleClick);\n    this.unmount = () => {\n      console.log('pause button unmount');\n      el.removeEventListener('click', handleClick);\n      audio.removeEventListener('play', handleChangeState);\n      el.classList.add('disabled');\n    };\n  },\n};\n","const el = document.getElementById('time');\nconst DEFAULT_TIME = '00:00.000';\n\nconst currentValue = time.querySelector('.time-current');\nconst totalValue = time.querySelector('.time-total--value');\ncurrentValue.innerHTML = DEFAULT_TIME;\ntotalValue.innerHTML = DEFAULT_TIME;\n\nconst f2 = (n) => (n >= 10 ? n : '0' + n);\nconst f3 = (n) => (n >= 100 ? n : '0' + f2(n));\n\nconst format = (duration) => {\n  let t = new Date(duration * 1000);\n  let s =\n    f2(t.getMinutes()) +\n    ':' +\n    f2(t.getSeconds()) +\n    '.' +\n    f3(t.getMilliseconds());\n\n  return s\n    .split('')\n    .map((c) =>\n      c.localeCompare('.') === 0 || c.localeCompare(':') === 0\n        ? c\n        : '<span class=\"letter\">' + c + '</span>'\n    )\n    .join('');\n};\n\nexport default {\n  unmount() {},\n  mount(autio) {\n    console.log('time component mount');\n    const handleDurationChange = () => {\n      totalValue.innerHTML = format(autio.duration);\n      currentValue.innerHTML = format(autio.currentTime);\n    };\n    autio.addEventListener('durationchange', handleDurationChange);\n\n    var timer = null;\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n      }\n    };\n\n    const handlePause = () => {\n      stop();\n    };\n\n    const handlePlayAndRateCahange = (e) => {\n      stop();\n      timer = setInterval(() => {\n        currentValue.innerHTML = format(autio.currentTime);\n      }, audio.playbackRate * 100);\n    };\n\n    ['play', 'ratechange'].forEach((e) => {\n      audio.addEventListener(e, handlePlayAndRateCahange);\n    });\n\n    autio.addEventListener('pause', handlePause);\n\n    this.unmount = () => {\n      console.log('time component unmount');\n      stop();\n\n      try {\n        audio.removeEventListener('durationchange', handleDurationChange);\n        audio\n          .removeEventListener('pause', handlePause)\n\n          [('play', 'ratechange')].forEach((e) => {\n            if (autio) {\n              audio.removeEventListener(e, handlePlayAndRateCahange);\n            }\n          });\n      } catch (e) {\n        console.warn(e);\n      }\n      currentValue.innerHTML = DEFAULT_TIME;\n      totalValue.innerHTML = DEFAULT_TIME;\n    };\n  },\n};\n","import { debounce } from '../utils';\n\nconst el = document.getElementById('speed');\nel.classList.add('disabled');\nconst range = el.querySelector('.speed-range');\nconst dot = range.querySelector('.speed-range--dot');\nconst progress = range.querySelector('.speed-range--progress');\nconst rangeValue = el.querySelector('.speed-range--value');\n\nconst WIDTH = progress.clientWidth;\nconst MIN_X = range.offsetLeft + dot.clientWidth;\nconst MAX_X = range.offsetLeft + range.clientWidth - dot.clientWidth / 2;\nconst DEBOUSE = 80;\n\nconst setRangeValue = (n) =>\n  (rangeValue.innerHTML = n\n    .toFixed(1)\n    .split('')\n    .map((c) =>\n      c.localeCompare('.') === 0 ? c : '<span class=\"letter\">' + c + '</span>'\n    )\n    .join(''));\n\n    \nconst setProgressValue = (value) => {\n  progress.style.setProperty('--value', value + '%');\n};\n\nfunction handleProgress(x) {\n  dot.style.left = x + 'px';\n  const value = (x * 100) / WIDTH;\n  setProgressValue(value);\n\n  if (Range.onchange) {\n    Range.onchange(value);\n  }\n}\n\nfunction dragElement(elmnt) {\n  var pos1 = 0,\n    pos2 = 0,\n    pos3 = 0,\n    pos4 = 0;\n\n  elmnt.onmousedown = dragMouseDown;\n\n  function dragMouseDown(e) {\n    e = e || window.event;\n    e.preventDefault();\n    // get the mouse cursor position at startup:\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    document.onmouseup = closeDragElement;\n    // call a function whenever the cursor moves:\n    document.onmousemove = elementDrag;\n  }\n\n  function elementDrag(e) {\n    e = e || window.event;\n    e.preventDefault();\n    // calculate the new cursor position:\n    pos1 = pos3 - e.clientX;\n    pos2 = pos4 - e.clientY;\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    // set the element's new position:\n    // elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\";\n\n    if (e.clientX < MIN_X) {\n      handleProgress(0);\n      return true;\n    }\n\n    if (e.clientX > MAX_X) {\n      handleProgress(range.clientWidth - dot.clientWidth);\n      return true;\n    }\n\n    handleProgress(elmnt.offsetLeft - pos1);\n  }\n\n  function closeDragElement() {\n    // stop moving when mouse button is released:\n    document.onmouseup = null;\n    document.onmousemove = null;\n  }\n}\n\ndragElement(dot);\n\nconst Range = {\n  unmount() {},\n  onchange: undefined,\n  mount(audio) {\n    console.log('speed ragne mount');\n\n    el.classList.remove('disabled');\n\n    setProgressValue(100 - audio.playbackRate * WIDTH);\n    setRangeValue(audio.playbackRate);\n\n    this.onchange = debounce((value) => {\n      audio.playbackRate = Math.max(1.0 - value / 100, 0.25);\n      setRangeValue(audio.playbackRate);\n    }, DEBOUSE);\n\n    this.unmount = () => {\n      console.log('speed ragne unmount');\n      this.onchange = undefined;\n      el.classList.add('disabled');\n    };\n  },\n};\n\nexport default Range;\n","function Helper(ctx) {\n    this.ctx = ctx\n    this.mainColor = \"black\"\n}\n\nHelper.prototype = {\n    __toRadians__(degree) {\n        return (degree * Math.PI) / 180;\n    },\n    __rotatePoint__([pointX, pointY], [originX, originY], degree) {\n        //clockwise\n        let angle = this.__toRadians__(degree)\n        let rotatedX = Math.cos(angle) * (pointX - originX) - Math.sin(angle) * (pointY - originY) + originX;\n        let rotatedY = Math.sin(angle) * (pointX - originX) + Math.cos(angle) * (pointY - originY) + originY;\n\n        return [rotatedX, rotatedY]\n    },\n    mutateData(data, type, extra = null) {\n        if (type === \"mirror\") {\n            let rtn = []\n\n            for (let i = 0; i < data.length; i += 2) {\n                rtn.push(data[i])\n            }\n\n            rtn = [...rtn, ...rtn.reverse()]\n            return rtn\n        }\n\n        if (type === \"shrink\") {\n            //resize array by % of current array \n            if (extra < 1) {\n                extra = data.length * extra\n            }\n\n            let rtn = []\n            let splitAt = Math.floor(data.length / extra)\n\n            for (let i = 1; i <= extra; i++) {\n                let arraySection = data.slice(i * splitAt, (i * splitAt) + splitAt)\n                let middle = arraySection[Math.floor(arraySection.length / 2)]\n                rtn.push(middle)\n            }\n\n            return rtn\n        }\n\n        if (type === \"split\") {\n            let size = Math.floor(data.length / extra)\n            let rtn = []\n            let temp = []\n\n            let track = 0\n            for (let i = 0; i <= size * extra; i++) {\n                if (track === size) {\n                    rtn.push(temp)\n                    temp = []\n                    track = 0\n                }\n\n                temp.push(data[i])\n                track++\n            }\n\n            return rtn\n        }\n\n        if (type === \"scale\") {\n            let scalePercent = extra / 255\n            if (extra <= 3 && extra >= 0) scalePercent = extra\n            let rtn = data.map(value => value * scalePercent)\n            return rtn\n        }\n\n        if (type === \"organize\") {\n            let rtn = {}\n            rtn.base = data.slice(60, 120)\n            rtn.vocals = data.slice(120, 255)\n            rtn.mids = data.slice(255, 2000)\n            return rtn\n        }\n\n        if (type === \"reverb\") {\n            let rtn = []\n            data.forEach((val, i) => {\n                rtn.push(val - (data[i + 1] || 0))\n            })\n            return rtn\n        }\n\n        if (type === \"amp\") {\n            let rtn = []\n            data.forEach(val => {\n                rtn.push(val * (extra + 1))\n            })\n            return rtn\n        }\n\n        if (type === \"min\") {\n            let rtn = []\n            data.forEach(value => {\n                if (value < extra) value = extra\n                rtn.push(value)\n            })\n            return rtn\n        }\n    },\n    getPoints(shape, size, [originX, originY], pointCount, endPoints, options = {}) {\n        let { offset = 0, rotate = 0, customOrigin = [] } = options\n        let rtn = {\n            start: [],\n            end: []\n        }\n\n        if (shape === \"circle\") {\n\n            let degreePerPoint = 360 / pointCount\n            let radianPerPoint = this.__toRadians__(degreePerPoint)\n            let radius = size / 2\n\n            for (let i = 1; i <= pointCount; i++) {\n                let currentRadian = radianPerPoint * i\n                let currentEndPoint = endPoints[i - 1]\n                let pointOffset = endPoints[i - 1] * (offset / 100)\n\n                let x = originX + (radius - pointOffset) * Math.cos(currentRadian)\n                let y = originY + (radius - pointOffset) * Math.sin(currentRadian)\n                let point1 = this.__rotatePoint__([x, y], [originX, originY], rotate)\n\n                rtn.start.push(point1)\n\n                x = originX + ((radius - pointOffset) + currentEndPoint) * Math.cos(currentRadian)\n                y = originY + ((radius - pointOffset) + currentEndPoint) * Math.sin(currentRadian)\n                let point2 = this.__rotatePoint__([x, y], [originX, originY], rotate)\n\n                rtn.end.push(point2)\n\n            }\n\n            return rtn\n        }\n\n        if (shape === \"line\") {\n            let increment = size / pointCount\n\n            originX = customOrigin[0] || originX\n            originY = customOrigin[1] || originY\n\n            for (let i = 0; i <= pointCount; i++) {\n                let degree = rotate\n                let pointOffset = endPoints[i] * (offset / 100)\n\n                let startingPoint = this.__rotatePoint__([originX + (i * increment), originY - pointOffset],\n                    [originX, originY], degree)\n                rtn.start.push(startingPoint)\n\n                let endingPoint = this.__rotatePoint__([originX + (i * increment), (originY + endPoints[i]) - pointOffset],\n                    [originX, originY], degree)\n                rtn.end.push(endingPoint)\n            }\n\n            return rtn\n\n        }\n\n    },\n    drawCircle([x, y], diameter, options = {}) {\n        let { color, lineColor = this.ctx.strokeStyle } = options\n\n        this.ctx.beginPath();\n        this.ctx.arc(x, y, diameter / 2, 0, 2 * Math.PI);\n        this.ctx.strokeStyle = lineColor\n        this.ctx.stroke();\n        this.ctx.fillStyle = color\n        if (color) this.ctx.fill()\n    },\n    drawOval([x, y], height, width, options = {}) {\n        let { rotation = 0, color, lineColor = this.ctx.strokeStyle } = options;\n        if (rotation) rotation = this.__toRadians__(rotation);\n\n        this.ctx.beginPath();\n        this.ctx.ellipse(x, y, width, height, rotation, 0, 2 * Math.PI);\n        this.ctx.strokeStyle = lineColor\n        this.ctx.stroke();\n        this.ctx.fillStyle = color\n        if (color) this.ctx.fill()\n    },\n    drawSquare([x, y], diameter, options = {}) {\n        this.drawRectangle([x, y], diameter, diameter, options)\n    },\n    drawRectangle([x, y], height, width, options = {}) {\n        let { color, lineColor = this.ctx.strokeStyle, radius = 0, rotate = 0 } = options\n\n        // if (width < 2 * radius) radius = width / 2;\n        // if (height < 2 * radius) radius = height / 2;\n\n        this.ctx.beginPath();\n        this.ctx.moveTo(x + radius, y);\n        let p1 = this.__rotatePoint__([x + width, y], [x, y], rotate)\n        let p2 = this.__rotatePoint__([x + width, y + height], [x, y], rotate)\n        this.ctx.arcTo(p1[0], p1[1], p2[0], p2[1], radius);\n\n        let p3 = this.__rotatePoint__([x + width, y + height], [x, y], rotate)\n        let p4 = this.__rotatePoint__([x, y + height], [x, y], rotate)\n        this.ctx.arcTo(p3[0], p3[1], p4[0], p4[1], radius);\n\n        let p5 = this.__rotatePoint__([x, y + height], [x, y], rotate)\n        let p6 = this.__rotatePoint__([x, y], [x, y], rotate)\n        this.ctx.arcTo(p5[0], p5[1], p6[0], p6[1], radius);\n\n        let p7 = this.__rotatePoint__([x, y], [x, y], rotate)\n        let p8 = this.__rotatePoint__([x + width, y], [x, y], rotate)\n        this.ctx.arcTo(p7[0], p7[1], p8[0], p8[1], radius);\n        this.ctx.closePath();\n\n        this.ctx.strokeStyle = lineColor;\n        this.ctx.stroke()\n        this.ctx.fillStyle = color\n        if (color) this.ctx.fill()\n\n    },\n    drawLine([fromX, fromY], [toX, toY], options = {}) {\n        let { lineColor = this.ctx.strokeStyle } = options\n\n        this.ctx.beginPath();\n        this.ctx.moveTo(fromX, fromY);\n        this.ctx.lineTo(toX, toY);\n        this.ctx.strokeStyle = lineColor\n        this.ctx.stroke();\n    },\n    drawPolygon(points, options = {}) {\n        let { color, lineColor = this.ctx.strokeStyle, radius = 0, close = false } = options\n\n        function getRoundedPoint(x1, y1, x2, y2, radius, first) {\n            let total = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)\n            let idx = first ? radius / total : (total - radius) / total;\n\n            return [x1 + (idx * (x2 - x1)), y1 + (idx * (y2 - y1))];\n        }\n\n        function getRoundedPoints(pts, radius) {\n            let len = pts.length\n            let res = new Array(len);\n\n            for (let i2 = 0; i2 < len; i2++) {\n                let i1 = i2 - 1;\n                let i3 = i2 + 1;\n\n                if (i1 < 0) i1 = len - 1;\n                if (i3 == len) i3 = 0;\n\n                let p1 = pts[i1];\n                let p2 = pts[i2];\n                let p3 = pts[i3];\n\n                let prevPt = getRoundedPoint(p1[0], p1[1], p2[0], p2[1], radius, false);\n                let nextPt = getRoundedPoint(p2[0], p2[1], p3[0], p3[1], radius, true);\n                res[i2] = [prevPt[0], prevPt[1], p2[0], p2[1], nextPt[0], nextPt[1]];\n            }\n            return res;\n        };\n\n        if (radius > 0) {\n            points = getRoundedPoints(points, radius);\n        }\n\n        let i, pt, len = points.length;\n        for (i = 0; i < len; i++) {\n            pt = points[i];\n            if (i == 0) {\n                this.ctx.beginPath();\n                this.ctx.moveTo(pt[0], pt[1]);\n            } else {\n                this.ctx.lineTo(pt[0], pt[1]);\n            }\n            if (radius > 0) {\n                this.ctx.quadraticCurveTo(pt[2], pt[3], pt[4], pt[5]);\n            }\n        }\n\n        if (close) this.ctx.closePath();\n        this.ctx.strokeStyle = lineColor\n        this.ctx.stroke();\n\n        this.ctx.fillStyle = color\n        if (color) this.ctx.fill()\n    }\n\n}\n\n\nexport default Helper","import visual from './visual';\nconst DEFAULT_COLORS = [\n  'rgb(70,113,170)',\n  'rgb(137,204,211)',\n  'rgb(32,138,170)',\n  'rgb(191,96,107)',\n  'rgb(145,101,159)',\n  'rgb(70,113,170)',\n];\n\nlet lastCanvasId, functionContext;\n\nconst defaultOptions = {\n  stroke: 1,\n  colors: DEFAULT_COLORS,\n};\n\nfunction getFunctionContext(canvasId) {\n  console.log('getFunctionContext', canvasId);\n  let canvas = document.getElementById(canvasId);\n\n  let ctx = canvas.getContext('2d');\n  let h = canvas.height;\n  let w = canvas.width;\n\n  ctx.strokeStyle = defaultOptions.colors[0];\n  ctx.lineWidth = defaultOptions.stroke;\n\n  return {\n    options: defaultOptions,\n    ctx,\n    h,\n    w,\n    canvasId,\n  };\n}\n\nexport function visualize(data, canvasId) {\n  if (!lastCanvasId || (lastCanvasId && lastCanvasId !== canvasId)) {\n    functionContext = getFunctionContext(canvasId);\n    lastCanvasId = canvasId;\n  }\n\n  //clear canvas\n  functionContext.ctx.clearRect(0, 0, functionContext.w, functionContext.h);\n  functionContext.ctx.beginPath();\n\n  visual(data, functionContext);\n}\n","import Helper from './helper';\nexport default (data, functionContext) => {\n  let { options, ctx, h, w } = functionContext;\n  let { colors } = options;\n\n  let helper = new Helper(ctx);\n\n  data = helper.mutateData(data, 'shrink', 300);\n  data = helper.mutateData(data, 'scale', h / 2);\n  data = helper.mutateData(data, 'split', 5).slice(0, 4);\n\n  let colorIndex = 0;\n  data.forEach((points) => {\n    const options = {\n      lineColor: colors[colorIndex],\n      radius: h * 0.015,\n    };\n\n    const origin = [0, h / 2];\n\n    let wavePoints = helper.getPoints('line', w, origin, points.length, points);\n    helper.drawPolygon(wavePoints.end, options);\n\n    let invertedPoints = helper.getPoints(\n      'line',\n      w,\n      origin,\n      points.length,\n      points,\n      { offset: 100 }\n    );\n    helper.drawPolygon(invertedPoints.start, options);\n    colorIndex++;\n  });\n};\n","import { visualize } from './visualize';\n\nlet drawVisual;\n\nexport default {\n  _drawVisual: undefined,\n  unmount() {\n    console.log('unmount visualize');\n    if (drawVisual) {\n      window.cancelAnimationFrame(drawVisual);\n    }\n  },\n  mount(canvas_id, audioContext) {\n    const bufferLength = audioContext.analyser.frequencyBinCount;\n    const data = new Uint8Array(bufferLength);\n\n    console.log('mount visualize', canvas_id);\n\n    function renderFrame() {\n      if (!document.getElementById(canvas_id)) {\n        return;\n      }\n      drawVisual = requestAnimationFrame(renderFrame);\n      audioContext.analyser.getByteFrequencyData(data);\n\n      visualize(data, canvas_id);\n    }\n\n    renderFrame();\n  },\n};\n","import PlayButton from './components/playButton';\nimport StopButton from './components/stopButton';\nimport PauseButton from './components/pauseButton';\nimport TimeComponent from './components/time';\nimport SpeedRange from './components/speedRange';\nimport Visializer from './components/visualizer';\n\nconst AUDIO_TYPE_CHECK = /^audio\\//;\nconst isAudioFile = (type) => AUDIO_TYPE_CHECK.test(type);\nconst DEFAULT_TITLE = 'GB Player';\n\nclass Component {\n  unmount() {}\n}\n\nclass ComponentProgressControl extends Component {\n  constructor(el) {\n    super();\n    this.el = el;\n  }\n\n  mount(audio) {\n    console.log('progress control mount');\n    var timer = null;\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n      }\n    };\n    const handlePlayAndRateCahange = (e) => {\n      stop();\n      this.el.setAttribute('value', audio.currentTime);\n\n      timer = setInterval(() => {\n        this.el.setAttribute('value', audio.currentTime);\n      }, audio.playbackRate * 1000);\n    };\n\n    const handleDurationChange = (e) => {\n      this.el.setAttribute('max', audio.duration);\n    };\n\n    const handlePause = (e) => {\n      stop();\n    };\n\n    audio.addEventListener('durationchange', handleDurationChange);\n    ['play', 'ratechange'].forEach((e) => {\n      audio.addEventListener(e, handlePlayAndRateCahange);\n    });\n    audio.addEventListener('pause', handlePause);\n\n    this.unmount = () => {\n      console.log('progress control unmount');\n\n      this.el.removeAttribute('max');\n      this.el.setAttribute('value', 0);\n\n      audio.removeEventListener('durationchange', handleDurationChange);\n      ['play', 'ratechange'].forEach((e) => {\n        audio.removeEventListener(e, handlePlayAndRateCahange);\n      });\n      audio.removeEventListener('pause', handlePause);\n    };\n  }\n}\n\nclass ComponentLoopControl extends Component {\n  constructor() {\n    super();\n    this.start = 2;\n    this.end = 12;\n  }\n  mount(audio) {\n    console.log('loop control mount');\n    var timer = null;\n    const stop = () => {\n      if (timer) {\n        clearInterval(timer);\n        timer = null;\n      }\n    };\n    const handlePlayAndRateCahange = (e) => {\n      stop();\n      audio.currentTime = this.start;\n      this.timer = setInterval(() => {\n        if (audio.currentTime > this.end) {\n          audio.currentTime = this.start;\n        }\n      }, audio.playbackRate * 1000);\n    };\n\n    const handlePause = (e) => {\n      stop();\n    };\n\n    ['play', 'ratechange'].forEach((e) => {\n      audio.addEventListener(e, handlePlayAndRateCahange);\n    });\n\n    audio.addEventListener('pause', handlePause);\n\n    this.unmount = () => {\n      console.log('loop control unmount');\n\n      ['play', 'ratechange'].forEach((e) => {\n        audio.removeEventListener(e, handlePlayAndRateCahange);\n      });\n      audio.removeEventListener('pause', handlePause);\n    };\n  }\n}\n\nconst audioContext = {\n  _context: undefined,\n  _analyser: undefined,\n  get context() {\n    if (this._context === undefined) {\n      this._context = new (window.AudioContext || window.webkitAudioContext)();\n    }\n\n    return this._context;\n  },\n\n  get analyser() {\n    if (this._analyser === undefined) {\n      this._analyser = this.context.createAnalyser();\n      this._analyser.minDecibels = -90;\n      this._analyser.maxDecibels = -10;\n      this._analyser.smoothingTimeConstant = 0.85;\n      this._analyser.fftSize = 32768;\n\n      const source = this.context.createMediaElementSource(\n        document.getElementById('audio')\n      );\n      source.connect(this._analyser);\n    }\n\n    return this._analyser;\n  },\n\n  connect() {\n    this.analyser.connect(this.context.destination);\n  },\n\n  disconnect() {\n    if (this._analyser) {\n      this.analyser.disconnect(this.context.destination);\n    }\n  },\n};\n// async\nfunction getFileAudio(audio, file) {\n  if (!isAudioFile(file.type)) {\n    throw new Error('is not a audio file');\n  }\n\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      audio.src = e.target.result;\n      resolve();\n    };\n    reader.readAsDataURL(file);\n    reader.onerror = (e) => reject(e);\n  });\n}\n\nconst canvasFullWidth = () => {\n  const canvas = document.getElementById('visualizer');\n  canvas.setAttribute('width', document.querySelector('.wrapper').clientWidth);\n}\n\nfunction init() {\n  const fileElement = document.getElementById('audio-data');\n  const audioElement = document.getElementById('audio');\n\n  canvasFullWidth()\n\n  const ProgressControl = new ComponentProgressControl(\n    document.getElementById('progress-control')\n  );\n\n  const LoopControl = new ComponentLoopControl();\n\n  fileElement.addEventListener('change', (e) => {\n    PlayButton.unmount();\n    StopButton.unmount();\n    PauseButton.unmount();\n    TimeComponent.unmount();\n    SpeedRange.unmount();\n\n    ProgressControl.unmount();\n\n    // LoopControl.unmount();\n\n    Visializer.unmount();\n\n    audioContext.disconnect();\n\n    getFileAudio(audioElement, e.target.files[0]).then(() => {\n      document.title = e.target.files[0].name + ' — ' + DEFAULT_TITLE;\n\n      PlayButton.mount(audioElement);\n      StopButton.mount(audioElement);\n      PauseButton.mount(audioElement);\n      TimeComponent.mount(audioElement);\n      SpeedRange.mount(audioElement);\n\n      ProgressControl.mount(audioElement);\n\n      // LoopControl.mount(audioElement);\n\n      audioContext.connect();\n      Visializer.mount('visualizer', audioContext)\n\n    });\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', init);\n"],"names":["$57718f456c0639eb6dfd5cd0331d6752$export$getStartPosition","audio","dataset","startAt","$2e4d837b8ab2fca2b9da0aac1c50e9c7$var$el","document","getElementById","classList","add","unmount","mount","console","log","handleCanPlayThrough","remove","handleClick","duration","paused","pause","currentTime","play","handleChangeState","toggle","addEventListener","forEach","e","this","removeEventListener","$8ed0058ba0cb4efac070d3ee84aa9630$var$el","$4e8a4e7423eb937486d63643ced92ca3$var$el","$59f386ba4a58e0e5100798be985e3704$var$DEFAULT_TIME","$59f386ba4a58e0e5100798be985e3704$var$currentValue","time","querySelector","$59f386ba4a58e0e5100798be985e3704$var$totalValue","innerHTML","$59f386ba4a58e0e5100798be985e3704$var$f2","n","$59f386ba4a58e0e5100798be985e3704$var$format","t","Date","getMinutes","getSeconds","getMilliseconds","split","map","c","localeCompare","join","autio","handleDurationChange","timer","stop","clearInterval","handlePause","handlePlayAndRateCahange","setInterval","playbackRate","warn","$ad8e90dc4c280699d79d1e9f2df58b17$var$el","$ad8e90dc4c280699d79d1e9f2df58b17$var$range","$ad8e90dc4c280699d79d1e9f2df58b17$var$dot","$ad8e90dc4c280699d79d1e9f2df58b17$var$progress","$ad8e90dc4c280699d79d1e9f2df58b17$var$rangeValue","$ad8e90dc4c280699d79d1e9f2df58b17$var$WIDTH","clientWidth","$ad8e90dc4c280699d79d1e9f2df58b17$var$MIN_X","offsetLeft","$ad8e90dc4c280699d79d1e9f2df58b17$var$MAX_X","$ad8e90dc4c280699d79d1e9f2df58b17$var$setRangeValue","toFixed","$ad8e90dc4c280699d79d1e9f2df58b17$var$setProgressValue","value","style","setProperty","$ad8e90dc4c280699d79d1e9f2df58b17$var$handleProgress","x","left","$ad8e90dc4c280699d79d1e9f2df58b17$export$default","onchange","elmnt","pos1","pos3","pos4","elementDrag","window","event","preventDefault","clientX","clientY","closeDragElement","onmouseup","onmousemove","onmousedown","$ad8e90dc4c280699d79d1e9f2df58b17$var$dragElement","undefined","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","Math","max","$529d8bc560162eac4bebe0fafbfac339$export$default","ctx","mainColor","prototype","__toRadians__","degree","PI","__rotatePoint__","pointX","pointY","originX","originY","angle","cos","sin","mutateData","data","type","extra","rtn","i","length","push","reverse","splitAt","floor","arraySection","slice","middle","size","temp","track","scalePercent","base","vocals","mids","val","getPoints","shape","pointCount","endPoints","options","offset","rotate","customOrigin","start","end","degreePerPoint","radianPerPoint","radius","currentRadian","currentEndPoint","pointOffset","y","point1","point2","increment","startingPoint","endingPoint","drawCircle","diameter","color","lineColor","strokeStyle","beginPath","arc","stroke","fillStyle","fill","drawOval","height","width","rotation","ellipse","drawSquare","drawRectangle","moveTo","p1","p2","arcTo","p3","p4","p5","p6","p7","p8","closePath","drawLine","fromX","fromY","toX","toY","lineTo","drawPolygon","points","close","getRoundedPoint","x1","y1","x2","y2","first","total","sqrt","idx","pts","len","res","Array","i2","i1","i3","prevPt","nextPt","getRoundedPoints","pt","quadraticCurveTo","$cd254bf0f86f101936953601e0c26088$var$lastCanvasId","$cd254bf0f86f101936953601e0c26088$var$functionContext","$cd254bf0f86f101936953601e0c26088$var$defaultOptions","colors","$cd254bf0f86f101936953601e0c26088$var$DEFAULT_COLORS","$cd254bf0f86f101936953601e0c26088$export$visualize","canvasId","canvas","getContext","h","w","lineWidth","$cd254bf0f86f101936953601e0c26088$var$getFunctionContext","clearRect","functionContext","helper","colorIndex","origin","wavePoints","invertedPoints","$62f68647366893ec1d8efe44a79edd4e$var$drawVisual","cancelAnimationFrame","canvas_id","audioContext","bufferLength","analyser","frequencyBinCount","Uint8Array","renderFrame","requestAnimationFrame","getByteFrequencyData","$27a854f303685fd26c22e6c5aa9c94c5$var$AUDIO_TYPE_CHECK","$27a854f303685fd26c22e6c5aa9c94c5$var$Component","$27a854f303685fd26c22e6c5aa9c94c5$var$ComponentProgressControl","constructor","el","super","setAttribute","removeAttribute","$27a854f303685fd26c22e6c5aa9c94c5$var$ComponentLoopControl","$27a854f303685fd26c22e6c5aa9c94c5$var$audioContext","_context","_analyser","AudioContext","webkitAudioContext","createAnalyser","minDecibels","maxDecibels","smoothingTimeConstant","fftSize","createMediaElementSource","connect","destination","disconnect","$27a854f303685fd26c22e6c5aa9c94c5$var$getFileAudio","file","test","Error","Promise","resolve","reject","reader","FileReader","onload","src","target","result","readAsDataURL","onerror","fileElement","audioElement","ProgressControl","LoopControl","files","then","title","name"],"version":3,"file":"index.52aabd1f.js.map"}